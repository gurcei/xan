#OUTPUT "BIGSPRITE"'------------.DECLARATIONS'------------  #DECLARE A$ = ""  #DECLARE IDX = 0  #DECLARE VALUE = 0  #DECLARE LOC  #DECLARE K  #DECLARE SPRITEØFRAMEØIDX(8)  #DECLARE ”–“ÿ64≈Œ = $D057  #DECLARE ”–“»«‘≈Œ = $D055  #DECLARE ”–“»«‘   = $D056  #DECLARE ”√“Œ–‘“Ã”¬ = $D060  #DECLARE ”√“Œ–‘“¬ŒÀ = $D062  #DECLARE ”–“–‘“16 = $D06E  #DECLARE ”–“–‘“¡ƒ“ = $D06C  #DECLARE ”–“–‘“¬ŒÀ = $D06E  #DECLARE »œ‘“≈«Ø7 = $D05D'----.MAIN'----  GOSUB P1ØDROPØPAPERS  'GOSUB P2ØCOLOURØCYCLEØSTATICØMUSES  'GOSUB P3ØANIMATEØMUSE1Ø2Ø3Ø4  'GOSUB P4ØPULSEØBACKGROUNDØMURALØTOØCHORUS  'GOSUB P5ØANIMATEØMUSEØ5Ø6Ø7Ø8Ø9  'GOSUB P6ØPULSEØBACKGROUNDØMURALØ2NDØTIME  GOSUB P7ØBIGØOLIVIAØWITHØSPRITES  'GOSUB P8ØMUSESØRETURNØTOØPETSCIIØMURAL  'GOSUB P9ØPULSEØBACKGROUNDØMURALØ3RDØTIME  'GOSUB P10ØPETSCIIØDANCERSØCOMEØTOØLIFE  'GOSUB P11ØEXPANDEDØORØTILEDØSPRITES  'GOSUB P12ØMUSESØDANCINGØINØCIRCLE  'GOSUB P13ØHOLLYWOODØDASH  'GOSUB P14ØFINALE'==============.P1ØDROPØPAPERS'==============  GOSUB P1ØINIT  GOSUB P1ØLOOP  GOSUB P1ØENDER  RETURN.P1ØINIT'-------  ' LOAD 13 STANDARD SPRITES FOR PAPER  ^^BLOAD "PAPER.DAT",P($47C40),R  ' DISABLE ANY 64-BIT WIDE SPRITES  POKE ”–“ÿ64≈Œ, 0  ' ALL SPRITES NORMAL HEIGHT  POKE ”–“»«‘≈Œ, 0  ' ENFORCE SPRITES INTO ¬¡ŒÀ4 AND ”–“–‘“16 BIT TURNED ON  POKE ”–“–‘“¬ŒÀ, 4+128  WPOKE ”–“–‘“¡ƒ“, 0  ' PREPARE ALL SPRITE  FOR K = 0 TO 7    SPRITEØFRAMEØIDX(K) = INT(RND(1)*13)    SPRITE K, 1, 13    MOVSPR K, 30+50*K, 50 + 20*K    WPOKE ($40000+K*2), $11F1 + SPRITEØFRAMEØIDX(K)  NEXT K  GETKEY A$  RETURN.P1ØLOOP'-------  ' DROP PAPER SPRITES DOWN  ' START FADING COLOURS FROM GRY TO COLOURED AS THE PAPER DROPS  RETURN.P1ØENDER'--------  RETURN'==========================.P7ØBIGØOLIVIAØWITHØSPRITES'==========================  GOSUB P7ØINIT  GOSUB P7ØLOOP  GOSUB P7ØENDER  RETURN'----.P7ØINIT'----  ' SWITCH TO 80X50  BANK 128  SETBIT »œ‘“≈«Ø7, 7  POKE $D031, $E8 ' 1110 1000 = »640,∆¡”‘,¡‘‘“,÷400  ' MOVE ”√“Œ–‘“ TO BANK4 - $8000  WPOKE ”√“Œ–‘“Ã”¬, $8000  POKE ”√“Œ–‘“¬ŒÀ,$04  ' LET ALL SPRITES BE 64 BITS WIDE  POKE ”–“ÿ64≈Œ, 255  ' LET ALL SPRITES BE 64 BITS HIGH  POKE ”–“»«‘≈Œ, 255  POKE ”–“»«‘, 64  ' $4,0000 +------------------+  '         ! ”–“–‘“ (8 WORDS) !  ' $4,0040 +------------------+ <-- SPRPTR $1001  '         ! Õ’”≈.ƒ¡‘         !  '         ! ========         !  '         ! Õ’”≈#1 - FRAME 0 !  ' $4,0240 +..................+ <-- SPRPTR $1001 + 8  '         ! Õ’”≈#1 FRAMES1-5 !  ' $4,0≈40 +..................+ <-- SPRPTR $1001 + 8*6  '         ! Õ’”≈#2 FRAMES0-5 !  ' $4,1¡40 +..................+ <-- SPRPTR $1001 + 8*12  '         ! Õ’”≈”#3 TO #9    !  ' $4,6√40 +..................+  '         ! 32 X “«¬ –¡Ã≈‘‘≈ !  ' $4,6√¡0 +..................+  '         ! OLI - FRAME 0    !  ' $4,7√40 +------------------+  '         ! –¡–≈“.ƒ¡‘        !  '         ! =========        !  '         ! –¡–≈“ - FRAME 0  !  ' $4,7√80 +..................+  '         ! –¡–≈“ - FRAME 1  !  ' $4,7√√0 +..................+  '         ! –¡–≈“ FRM 2-12   !  ' $4,7∆80 +------------------+  ' $4,8000 +------------------+  '         ! ”√“≈≈Œ Õ≈Õ 80X50 !  ' $4,8∆¡0 +------------------+  ' $5,0000 +------------------+  '         ! œÃ….ƒ¡‘          !  ' $5,∆¡00 +------------------+  ' ENFORCE SPRITES INTO ¬¡ŒÀ4 AND ”–“–‘“16 BIT TURNED ON  POKE ”–“–‘“¬ŒÀ, 4+128             WPOKE ”–“–‘“¡ƒ“, 0  ' LOAD 64X64 SPRITE DATA  ^^BLOAD "MUSE.DAT",P($40040),R  ' LOAD OLI FRAMES TO BANK 5  ^^BLOAD "OLI.DAT",P($50000),R  ' SWITCH PALETTE  #DECLARE RED,GREEN,BLUE  LOC=$46C40  FOR IDX=0 TO 31    RED=PEEK(LOC):LOC=LOC+1    GREEN=PEEK(LOC):LOC=LOC+1    BLUE=PEEK(LOC):LOC=LOC+1    ' PRINT "R=";RED;", G=";GREEN;", B=";BLUE    POKE $D100+IDX,RED    POKE $D200+IDX,GREEN    POKE $D300+IDX,BLUE  NEXT IDX  ' CLEAR 80X50 CHARS AND COLOUR RAM  FOR IDX=0 TO 3999:POKE $48000+IDX,160:POKE $FF80000+IDX,6:NEXT IDX        ' DISPLAY SPRITE  #DECLARE SPRCLR,OFFX  SPRCLR = 30  OFFX=25  SPRITE 0,1,SPRCLR  MOVSPR 0,0+OFFX,50  SPRITE 1,1,SPRCLR  MOVSPR 1,85+OFFX,50  SPRITE 2,1,SPRCLR  MOVSPR 2,171+OFFX,50  SPRITE 3,1,SPRCLR  MOVSPR 3,256+OFFX,50  SPRITE 4,1,SPRCLR  MOVSPR 4,0+OFFX+8,180  SPRITE 5,1,SPRCLR  MOVSPR 5,85+OFFX+8,180  SPRITE 6,1,SPRCLR  MOVSPR 6,171+OFFX,180  SPRITE 7,1,SPRCLR  MOVSPR 7,256+OFFX,180  ' POINT SPRITE0 TO $4040  BANK 4  FOR K=0 TO 14 STEP 2    WPOKE K, $1001+8*(3*K)  NEXT K  ' SET BACKGROUND, BORDER  BACKGROUND 6  BORDER 14  IDX = 0  ^^OI=0:OD=0  RETURN/----.P7ØLOOP'----  ' SELECT SPRITE FRAME  BANK 4  FOR K=0 TO 7    WPOKE K*2, $1001+8*(IDX+6*K)  NEXT K  GOSUB DRAWOLIVIA  SLEEP .3  IDX=IDX+1  IF IDX=6 THEN IDX=0  GET A$:IF A$="" THEN GOTO P7ØLOOP  RETURN'-----.P7ØENDER'-----  FOR IDX = 0 TO 7    SPRITE IDX,0  NEXT IDX  ' SWITCH TO 80X25  BANK 128  POKE $D031, $E0 ' 1110 0000 = »640,∆¡”‘,¡‘‘“  ' RESTORE ”√Œ–‘“ TO BANK 0 - $0800  WPOKE ”√“Œ–‘“Ã”¬, $0800  POKE ”√“Œ–‘“¬ŒÀ, 0  PALETTE RESTORE  END'----------.DRAWOLIVIA'----------  #DECLARE X,Y,Z,BVAL,OLIDX  ^^IF OI=0 THEN LO=$46CA0  ^^IF OI>0 THEN LO=$50000+4000*(OI-1)  LOC=$46CA0 ' FIRST OLIVIA FRAME  ^^EDMA 0,4000,LO,$FF80000  ^^IF OD = 0 THEN OI = OI + 1:IF OI > 16 THEN OD = 1:OI=16  ^^IF OD = 1 THEN OI = OI - 1:IF OI < 1 THEN OD = 0  RETURN